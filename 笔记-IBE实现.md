# 笔记-IBE实现

基于身份的加密系统是公共密钥加密系统，密文和密钥的产生都与身份ID有关。加密者使用公钥对明文加密，其中公钥是接收者的身份ID和一组公开参数，解密者只有使用对应身份ID产生的私钥才能对密文正确解密，其中用户私钥由PKG生成。

PKG拥有一个主密钥，在用户验证身份后，PKG将主密钥用于产生根据身份生成的用户私钥，发送给用户。

>IBE优点：

>１.　通过用户身份ID和一组公开参数作为公钥把明文消息加密发送给对方，改变了以往发送方需要分别获取接收者不同公钥的方式，简化流程。

>２.　私钥由第三方信任机构PKG产生，取消了认证的公钥证书，解决了注册登记时用户过多的管理繁冗和存储复杂的问题。还取消了公钥基础设施PKI和第三方信任机构CA身份认证，证书颁发等流程。

## 双线性映射

> 一个双线性映射是由两个向量空间上的元素，生成第三个向量空间上一个元素的函数，并且该函数对每个参数都是线性的。

若B:V×W→X是一个双线性映射，则V固定，W可变时，W到X的映射是线性的，W固定，V可变时，V到X的映射也是线性的，也就是说保持双线性映射中的任意一个参数固定，另一个参数对X的映射都是线性的。 

## 传统PKI与IBE比较

功能 | 基于证书的PKI | 基于身份的IBE
-|-|-
私钥生成|由用户或CA生成|由PKG生成
密钥证书|有|无
密钥分发|需要一个完整保护通道用于用户分发一个新的公钥到他的CA|需要一个完整的私有保护通道用于PKG把新的私钥分发给用户
公钥获取|从公共目录或密钥生成者获取|基于用户的身份动态获取
密钥托管|不需要|需要

## IBE存在的问题

1. 使用双线性映射函数构造的IBE方案计算效率太低。
2. 基于二次剩余提出的IBE方案低效不实用
3. PKG负担过重
4. 存在密钥托管问题


## IBE一般应用情景

1. alice用bob的邮箱地址作为公钥加密自己发给bob的邮件
2. bob接受到信息后，向密钥服务器PKG认证。密钥服务器则联系一个目录或其他的外部认证源来认证Bob的身份。
3. 认证完成后，密钥服务器返回给Bob他的私钥
4. Bob用私钥解密邮件

## IBE算法（概括性的）

1. 参数生成。选择安全参量K并获得系统参量和主密钥。系统参量公开，主密钥则只有PKG知道。
2. 密钥生成。输入系统参量，主密钥和ID，获得私钥。（ID是公钥）
3. 加密。输入系统参量和ID和待加密信息
4. 解密。输入系统参量，私钥和密文

### Cocks IBE
(基于大数分解难题)

1. setup。PKG使用安全参数t，生成两个质数p,q，提供n=pq，提供一个哈希函数H（哈希用户的邮箱地址获得用户的公钥）。(p,q)就是主密钥，（n，H）就是系统参量。
2. extract。PKG从用户哪里获取公钥值，验证身份后，PKG返回私钥r，满足r^2=a mod n.
注意，一般会使用一系列的哈希函数来哈希例如邮件地址获取一系列的哈希值（公钥）a，直到a对n的勒让德符号为1，也就是方程x^2 = a mod n有解。且这种情况下，只有知道p，q才能解出上述方程。因而私钥r（或者说x）只有PKG知道
3. 加密和解密使用对称的方法和按位处理的方式。网络带宽占用过大。

### Boneh-Franklin IBE
(基于双线性映射，Weil配对原理)

1. setup。PKG使用安全参数t生成一个大质数q，用q产生两个满足双线性映射的域G1，G2.
（换句话说，在一个椭圆曲线上找一个点P，随机生成数s，s作为主钥，sP作为系统参数）。PKG还需要提供哈希函数H。
2. extract。Bob把ID发给PKG，通过身份验证后，PKG生成私钥s*H（ID）发回给Bob。
3. 加密和解密。根据韦伊配对原理，k=pair(r*ID, s*p)=pair(s*ID,r*p)。一个用来异或明文之后得到密文。只要用密文和剩下的数值k异或就可以得到明文。




这篇笔记基于《基于身份的加密体制研究综述 1001-3695（2010）01-0027-05》,
《An Identity Based Encryption Scheme based on Quadratic Residues》

没有具体去学weil配对原理，双线性映射什么的，老是感觉看不明白这些算法。我下面再去找找吧。。。